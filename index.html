<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>кликер sonal</title>
  <style>
    :root { --red: #ff0000; --gold: #ffcc00; --bg: #020202; }
    * { box-sizing: border-box; outline: none; -webkit-tap-highlight-color: transparent; }
    
    body { 
      margin: 0; height: 100vh; background: var(--bg); color: #fff; 
      font-family: 'Consolas', monospace; overflow: hidden; 
      display: flex; justify-content: center; align-items: center;
      user-select: none;
    }
    
    .main-screen { position: relative; z-index: 10; text-align: center; transition: filter 0.6s cubic-bezier(0.4, 0, 0.2, 1); width: 100%; }
    .blur { filter: blur(25px) brightness(0.3); pointer-events: none; }

    /* МЯГКИЙ МАТОВЫЙ ОВЕРЛЕЙ */
    .modal-overlay { 
      position: fixed; inset: 0; 
      background: rgba(0, 0, 0, 0.2); 
      backdrop-filter: blur(0px); /* Анимируется через JS */
      display: none; justify-content: center; align-items: center; 
      z-index: 200; opacity: 0; 
      transition: opacity 0.5s ease, backdrop-filter 0.5s ease;
    }
    .modal-overlay.active { display: flex; opacity: 1; backdrop-filter: blur(12px); }
    
    /* ПЛАВНОЕ ПОЯВЛЕНИЕ В ЦЕНТР */
    .shop-window { 
      width: 460px; max-width: 92%; max-height: 80vh; 
      background: rgba(20, 20, 20, 0.7); /* Матовая прозрачность */
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 24px;
      padding: 30px; position: relative; overflow-y: auto;
      box-shadow: 0 40px 100px rgba(0, 0, 0, 0.8);
      
      /* Начальное состояние: меньше и ниже */
      transform: scale(0.8) translateY(40px);
      opacity: 0;
      transition: transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.5s ease;
    }
    .modal-overlay.active .shop-window { 
      transform: scale(1) translateY(0); 
      opacity: 1;
    }

    h1 { font-size: 80px; font-weight: 900; margin: 0 0 20px; font-style: italic; text-transform: uppercase; }
    #crushBtn { 
      padding: 30px 80px; font-size: 40px; font-weight: 900; 
      background: linear-gradient(180deg, var(--red), #500); 
      color: #fff; border: none; border-radius: 12px; 
      box-shadow: 0 10px 0 #300, 0 25px 50px rgba(255,0,0,0.2); 
      cursor: pointer; transition: 0.1s;
    }
    #crushBtn:active { transform: translateY(8px); box-shadow: 0 2px 0 #300; }
    
    .open-shop-btn { 
      position: fixed; top: 20px; right: 20px; 
      padding: 15px 30px; font-size: 16px; 
      background: rgba(255, 255, 255, 0.05); 
      border: 1px solid rgba(255, 255, 255, 0.1); 
      border-radius: 12px; color: var(--gold); 
      font-weight: 900; z-index: 50; transition: 0.3s;
    }

    .stats { position: fixed; top: 25px; left: 25px; z-index: 100; }
    .balance-val { font-size: 34px; font-weight: 900; letter-spacing: -1px; }
    
    .item-row { 
      display: flex; justify-content: space-between; align-items: center; 
      padding: 18px; background: rgba(255, 255, 255, 0.03); 
      border-radius: 14px; border: 1px solid rgba(255, 255, 255, 0.05); 
      margin-bottom: 12px; 
    }
    .buy-btn { padding: 10px 18px; font-size: 12px; font-weight: 900; background: #222; color: #fff; border: none; border-radius: 8px; min-width: 100px; }
    .buy-btn.active-snd { background: var(--gold); color: #000; }

    #ban-screen { position: fixed; inset: 0; background: #000; color: var(--red); display: none; flex-direction: column; justify-content: center; align-items: center; z-index: 9999; }
  </style>
</head>
<body>

<div id="ban-screen">
  <h1 style="font-size: 40px;">LIMIT EXCEEDED</h1>
  <p>DETECTED UNNATURAL CLICK SPEED. DATA RESET.</p>
</div>

<div class="stats">
  <div style="color:#555; font-size:10px; font-weight: bold;">CASH_TOTAL:</div>
  <div class="balance-val" id="bal">0</div>
  <div id="income" style="font-size:13px; color:var(--gold); margin-top:4px;">ДОХОД: +10</div>
</div>

<button class="open-shop-btn" onclick="toggleShop(true)">АРСЕНАЛ</button>

<div class="modal-overlay" id="modal">
  <div class="shop-window">
    <div style="position:absolute; top:20px; right:20px; cursor:pointer; font-size:24px; color:#555;" onclick="toggleShop(false)">×</div>
    <div style="color:var(--red); font-weight:900; margin-bottom:25px; border-bottom:1px solid rgba(255,255,255,0.1); padding-bottom:12px; font-size:22px; letter-spacing: 2px;">MARKET_SONAL</div>
    <div id="shop-content"></div>
  </div>
</div>

<div class="main-screen" id="main">
  <h1>УД<span>АР</span></h1>
  <button id="crushBtn">CRUSH</button>
</div>

<script>
  const balEl = document.getElementById('bal'), incomeEl = document.getElementById('income'), main = document.getElementById('main'), modal = document.getElementById('modal'), shopContent = document.getElementById('shop-content'), btn = document.getElementById('crushBtn');

  const sounds = [
    { id: "sounds.mp3", n: "УДАР", p: 0, inc: 10 },
    { id: "sound2.mp3", n: "ГАРАЖ БАЛГАРКА", p: 500, inc: 25 },
    { id: "sound3.mp3", n: "МУСУЛЬМАНИН", p: 2000, inc: 60 },
    { id: "sound4.mp3", n: "Я ЕГО ЩАС ОТХУЯРЮ", p: 7000, inc: 150 },
    { id: "sound5.mp3", n: "С ПИСЮНОМ ПОИГРАЙ", p: 20000, inc: 400 },
    { id: "sound6.mp3", n: "ГАДАЛКА", p: 50000, inc: 1000 },
    { id: "sound7.mp3", n: "ВАДИМ ДОМОЙ", p: 120000, inc: 2500 },
    { id: "sound8.mp3", n: "ААА ЦИГАНЕ", p: 300000, inc: 6000 },
    { id: "sound9.mp3", n: "ИДИ НАХУЙ", p: 800000, inc: 15000 },
    { id: "sound10.mp3", n: "ОЙ БЛЯТЬ НЕ ХОЧЕШЬ", p: 2000000, inc: 40000 },
    { id: "sound11.mp3", n: "А ТЫ ЧЕ ВЫРЯДИЛСЯ", p: 5000000, inc: 100000 },
    { id: "sound12.mp3", n: "ПЕТРОВИЧ ГАНДОН", p: 15000000, inc: 300000 }
  ];

  let state = JSON.parse(localStorage.getItem('sonal_save')) || { balance: 0, current: "sounds.mp3", inv: ["sounds.mp3"], currentIncome: 10 };
  let clickTimes = [];
  let currentAudio = null;

  function saveGame() { localStorage.setItem('sonal_save', JSON.stringify(state)); }

  function play() {
    if (currentAudio) { currentAudio.pause(); currentAudio.currentTime = 0; }
    currentAudio = new Audio(state.current);
    currentAudio.play().catch(() => {});
  }

  function toggleShop(open) {
    if(open) { 
      modal.style.display = 'flex'; 
      setTimeout(() => { modal.classList.add('active'); main.classList.add('blur'); }, 10);
      renderShop(); 
    } else { 
      modal.classList.remove('active'); 
      main.classList.remove('blur'); 
      setTimeout(() => { modal.style.display = 'none'; }, 500);
    }
  }

  function renderShop() {
    shopContent.innerHTML = '';
    sounds.forEach(s => {
      const owned = state.inv.includes(s.id), active = state.current === s.id;
      const row = document.createElement('div');
      row.className = 'item-row';
      row.innerHTML = `<div><div style="font-weight:900;">${s.n}</div><div style="font-size:11px;color:var(--gold);margin-top:2px;">+${s.inc} per click</div></div>
      <button class="buy-btn ${active?'active-snd':''}" onclick="buy('${s.id}', ${s.p}, ${s.inc})">${active?'АКТИВ':(owned?'ВЫБРАТЬ':s.p.toLocaleString())}</button>`;
      shopContent.appendChild(row);
    });
    balEl.innerText = state.balance.toLocaleString();
    incomeEl.innerText = `ДОХОД: +${state.currentIncome.toLocaleString()}`;
  }

  window.buy = (id, p, inc) => {
    if(state.inv.includes(id)) { state.current = id; state.currentIncome = inc; }
    else if(state.balance >= p) { state.balance -= p; state.inv.push(id); state.current = id; state.currentIncome = inc; }
    saveGame(); renderShop();
  };

  btn.onclick = (e) => {
    e.preventDefault();
    const now = Date.now();
    clickTimes.push(now);
    clickTimes = clickTimes.filter(t => t > now - 1000);

    if (clickTimes.length > 18) {
      localStorage.clear();
      document.getElementById('ban-screen').style.display = 'flex';
      setTimeout(() => { window.location.href = "https://www.google.com"; }, 2500);
      return;
    }

    play();
    state.balance += state.currentIncome;
    saveGame();
    renderShop();
  };

  renderShop();
</script>
</body>
</html>